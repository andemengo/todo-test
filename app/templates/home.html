{% extends "base.html" %} {% from "components/card.html" import render_card %}
{% from "components/button.html" import primary_button, secondary_button,
submit_button %} {% block title %}{{ page_title }} - Todo App{%endblock %} {%
block content %}
<div class="w-full max-w-md">
  {% call render_card(app_name, app_subtitle) %}
  <!-- Messaggio di benvenuto (visibile prima del login) -->
  <div id="welcomeSection" class="mb-6">
    <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-6 mb-6">
      <p class="text-center text-gray-700 font-medium">
        {{ welcome_message }} üëã<br />
        <span class="text-sm text-gray-600">{{ welcome_subtitle }}</span>
      </p>
    </div>

    <!-- Bottone Login -->
    {{ primary_button('showLoginBtn', 'Accedi', 'M11 16l-4-4m0 0l4-4m-4 4h14m-5
    4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1') }}
  </div>

  <!-- Form di Login (nascosto inizialmente) -->
  <div id="loginForm" class="hidden">
    <form id="loginFormElement" class="space-y-4">
      <!-- Email -->
      <div>
        <label class="block text-gray-700 font-semibold mb-2" for="email">
          {{ form_labels.email }}
        </label>
        <input
          type="email"
          id="email"
          placeholder="{{ form_placeholders.email }}"
          class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all outline-none"
          required
        />
      </div>

      <!-- Password -->
      <div>
        <label class="block text-gray-700 font-semibold mb-2" for="password">
          {{ form_labels.password }}
        </label>
        <input
          type="password"
          id="password"
          placeholder="{{ form_placeholders.password }}"
          class="w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all outline-none"
          required
        />
      </div>

      <!-- Messaggio di errore (nascosto inizialmente) -->
      <div
        id="errorMessage"
        class="hidden bg-red-50 border-2 border-red-200 text-red-700 px-4 py-3 rounded-lg"
      >
        <p class="font-semibold flex items-center gap-2">
          <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
            <path
              fill-rule="evenodd"
              d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
              clip-rule="evenodd"
            ></path>
          </svg>
          <span id="errorText">Credenziali non valide. Riprova.</span>
        </p>
      </div>

      <!-- Bottoni -->
      <div class="flex gap-3 pt-2">
        {{ secondary_button('cancelBtn', 'Annulla') }} {{
        submit_button('submitLoginBtn', 'Login', 'M5 13l4 4L19 7') }}
      </div>
    </form>
  </div>

  <!-- Sezione dopo il login (nascosta inizialmente) -->
  <div id="loggedInSection" class="hidden">
    <div
      class="bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-200 rounded-lg p-6 mb-6"
    >
      <p
        class="text-center text-green-700 font-semibold flex items-center justify-center gap-2"
      >
        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
          <path
            fill-rule="evenodd"
            d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
            clip-rule="evenodd"
          ></path>
        </svg>
        Login effettuato con successo!
      </p>
      <p class="text-center text-gray-600 mt-2">
        Benvenuto, <span id="loggedUser" class="font-semibold"></span>
      </p>
    </div>

    <div class="flex flex-col gap-3">
      <a
        id="goToTodoBtn"
        href="/todolist"
        class="bg-gradient-to-r from-blue-500 to-indigo-600 text-white py-3 px-8 rounded-lg font-semibold hover:shadow-xl transform hover:-translate-y-1 transition-all duration-200 w-full"
      >
        üìù Vai alla lista attivit√†
    </a>
      <button
        id="logoutBtn"
        class="bg-red-500 text-white py-3 px-8 rounded-lg font-semibold hover:bg-red-600 transition-all duration-200 w-full"
      >
        üö™ Logout
      </button>
    </div>
  </div>
  {% endcall %}

  <!-- Footer -->
  <p class="text-center text-white mt-6 text-sm opacity-80">
    Made with ‚ù§Ô∏è by {{ company_name }}
  </p>
</div>
{% endblock %}
